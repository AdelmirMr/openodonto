<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:a4j="http://richfaces.org/a4j">
<head>
<title>Search</title>
<style type="text/css">

.border-none{
border : none;
}

</style>
</head>
<body>
<a4j:form>
<t:saveState value="#{manterBean.search}"/>
<rich:panel>
     <f:facet name="header">
         <h:outputText value="Busca" />
     </f:facet>
     <rich:dataGrid value="#{manterBean.search.searchable.filters}" var="filter" columns="2" elements="#{manterBean.search.searchable.filerlength}" >
         <h:panelGrid columns="2">
             <h:outputLabel id="filterLabel" value="#{filter.label}" style="width : 80px"/>
             <h:panelGroup>
                 <rich:dataGrid var="input" value="#{filter.field.inputFields}" columns="1" elements="1" columnClasses="border-none" styleClass="border-none">
                     <h:inputText value="#{input.value}" />
                 </rich:dataGrid>
             </h:panelGroup>
             
         </h:panelGrid>
     </rich:dataGrid>
</rich:panel>
<a4j:commandButton value="busca" onclick="Richfaces.showModalPanel('searchModal');" />
</a4j:form>
<rich:modalPanel id="searchModal" autosized="true">
<a4j:form>
<rich:dataTable id="lista" rows="2" onRowMouseOver="this.style.backgroundColor='#F1F1F1';this.style.cursor='pointer';" onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}';this.style.cursor='default';" value="#{manterBean.search.results}" var="bean">
    <a4j:support id="loadSupportBean" event="onRowClick" >
        <f:setPropertyActionListener value="#{bean}" target="#{manterBean.search.selected}"/>
    </a4j:support>
    <rich:columns value="#{manterBean.search.searchable.facade}" var="facade" >
        <f:facet name="header">
            <h:outputText value="#{facade.colunmName}" />
        </f:facet>
        <h:outputText value="#{bean.value[facade.fieldName]}" />
    </rich:columns>
</rich:dataTable>
<rich:datascroller ajaxSingle="false" for="lista" maxPages="20" align="left" id="dataScroller" reRender="lista,loadSupportBean" />
<a4j:commandButton value="Buscar" action="#{manterBean.search.search}" reRender="lista,dataScroller" />
<a4j:commandButton value="Fechar" onclick="Richfaces.hideModalPanel('searchModal');" />
</a4j:form>
</rich:modalPanel>
</body>
</html>